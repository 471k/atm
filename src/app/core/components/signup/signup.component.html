<header [menu]="menu"></header>

<mat-grid-list cols="4" rowHeight="100px">
  <form #f="ngForm" (ngSubmit)="signup(f.value)" novalidate>

    <mat-grid-tile>
      <mat-error *ngIf="fullname.invalid && (fullname.dirty || fullname.touched)">
        <span *ngIf="fullname.errors?.['required']">Fullname is required.</span>
        <span *ngIf="fullname.errors?.['minlength']"> Fullname must be at least 3 characters long. </span>
        <span *ngIf="fullname.errors?.['maxlength']"> Fullname cannot exceed 50 characters. </span>
        <span *ngIf="fullname.errors?.['pattern']"> Fullname should contain only letters and spaces. </span>
      </mat-error>
    </mat-grid-tile>

    <mat-grid-tile>
      <mat-form-field>
        <mat-label>Fullname:</mat-label>
        <input
          [(ngModel)]="registration.fullname"
          name="fullname"
          #fullname="ngModel"
          required
          minlength="3"
          maxlength="50"
          pattern="[A-Za-z\s]+"
          matInput
          id="fullname"
        />
        
      </mat-form-field>
    </mat-grid-tile>

    <mat-grid-tile>
      <mat-form-field>
        <mat-label>Pin: </mat-label>
        <input
          [(ngModel)]="registration.pin"
          type="password"
          name="pin"
          #pin="ngModel"
          required
          minlength="6"
          maxlength="10"
          pattern="[0-9]+"
          matInput
          id="pin"
        />

      </mat-form-field>
    </mat-grid-tile>

    <mat-grid-tile>
      <mat-error *ngIf="pin.invalid && (pin.dirty || pin.touched)">
        <span *ngIf="pin.errors?.['required']">Pin is required.</span>
        <span *ngIf="pin.errors?.['minlength']"> Pin must be at least 6 digits long. </span>
        <span *ngIf="pin.errors?.['maxlength']"> Pin cannot exceed 10 digits. </span>
        <span *ngIf="pin.errors?.['pattern']"> Pin should contain only numbers. </span>
      </mat-error>
    </mat-grid-tile>

    <mat-grid-tile>
      <mat-error *ngIf="cardNr.invalid && (cardNr.dirty || cardNr.touched)">
        <span *ngIf="cardNr.errors?.['required']">Card Number is required.</span>
        <span *ngIf="cardNr.errors?.['pattern']"> Card Number should contain only numbers.</span>
        <span *ngIf="cardNr.errors?.['minlength']"> Card Number must be at least 3 digits long. </span>
      </mat-error>
    </mat-grid-tile>
    <mat-grid-tile>
      <mat-form-field>
        <mat-label>Card Number: </mat-label>
        <input
          [(ngModel)]="registration.cardNumber"
          type="text"
          name="cardNumber"
          #cardNr="ngModel"
          pattern="[0-9]+"
          minlength="3"
          required
          matInput
          id="cardNr"
        />
      </mat-form-field>
    </mat-grid-tile>

    <mat-grid-tile>
      <mat-form-field>
        <mat-label>Amount: </mat-label>
        <input
          [(ngModel)]="registration.balance"
          #balance="ngModel"
          name="balance"
          type="number"
          required
          matInput
          id="balance"
        />
      </mat-form-field>
    </mat-grid-tile>
    <mat-grid-tile>
      <mat-error *ngIf="balance.invalid && (balance.dirty || balance.touched)"> 
        <span *ngIf="balance.errors?.['required']">Amount is required.</span>
      </mat-error>
      
      <mat-error *ngIf="balance.value < 50"> 
        <span >Initial amount must be greater than or equal to $50.00.</span>
      </mat-error>
    </mat-grid-tile>

    <mat-grid-tile colspan="4">
      <button 
        type="submit"
        [disabled]="!f.valid || (balance.value < 50)"
        mat-raised-button 
        class="action-button" 
        color="primary">Sign Up</button>
    </mat-grid-tile>

  </form>

</mat-grid-list>
<mat-grid-list cols="3" rowHeight="100px">

  <mat-grid-tile>
    <a routerLink="/" color="accent" class="transaction-button" mat-raised-button>
      Back
    </a>
  </mat-grid-tile>
</mat-grid-list>